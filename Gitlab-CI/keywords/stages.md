# stages

Используйте stages для определения этапов, содержащих группы заданий. Используйте [stage](stage.md) в задании, чтобы настроить выполнение задания на определенном этапе.
Если stages не определен в файле .gitlab-ci.yml, то по умолчанию используются следующие этапы конвейера:
- .pre
- build
- test
- deploy
- .post

Порядок элементов на этапах определяет порядок выполнения заданий:
- Задания на одном этапе выполняются параллельно.
- Задания на следующем этапе выполняются после успешного завершения заданий предыдущего этапа.

Если конвейер содержит только задания на этапах .pre или .post, он не выполняется. На другом этапе должно быть как минимум еще одно задание. Этапы .pre и .post могут использоваться в требуемой конфигурации конвейера для определения заданий на соответствие требованиям, которые должны выполняться до или после выполнения заданий конвейера проекта.

**Тип слова:** Глобальное

**Пример:**
```YAML
stages:
  - build
  - test
  - deploy
```

В этом примере:
1. Все задания в build выполняются параллельно.
2. Если все задания в build завершаются успешно, тестовые задания выполняются параллельно.
3. Если все задания в test завершаются успешно, задания в deploy выполняются параллельно.
4. Если все задания в deploy завершаются успешно, конвейер помечается как пройденный.
Если какое-либо задание завершается ошибкой, конвейер помечается как завершенный, и задания на последующих этапах не запускаются. Задания на текущем этапе не останавливаются и продолжают выполняться.

**Дополнительные сведения:**
- Если в задании не указан этап, заданию назначается этап тестирования.
- Если этап определен, но ни одно из заданий его не использует, этап не отображается в конвейере, что может помочь в настройке конвейера соответствия:
    - Этапы могут быть определены в конфигурации соответствия, но оставаться скрытыми, если они не используются.
    - Определенные этапы становятся видимыми, когда разработчики используют их в определениях заданий.

**Связанные темы:**
- Чтобы запустить задание раньше и не обращать внимания на порядок этапов, используйте ключевое слово [needs](needs.md).
